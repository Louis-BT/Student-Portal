<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opportunities & Admissions | National Portal</title>
    
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:ital,wght@0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="theme.js"></script>

    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="db.js"></script> <style>
        /* --- 1. CORE ARCHITECTURE --- */
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg-color); color: var(--text-color); display: flex; height: 100vh; overflow: hidden; }
        .wrapper { display: flex; width: 100%; height: 100%; }

        .sidebar { width: 260px; background: #0f172a; color: white; display: flex; flex-direction: column; flex-shrink: 0; transition: 0.3s; z-index: 1000; }
        .sidebar-header { padding: 25px; font-weight: 700; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 10px; font-size: 1.1rem; }
        
        /* Injecting Dashboard Consistency: User Profile Widget */
        .user-profile-widget { padding: 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2); }
        .user-avatar { width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--primary-color); object-fit: cover; margin-bottom: 10px; background: #1e293b; }

        .nav-links { list-style: none; padding: 20px; margin: 0; flex: 1; overflow-y: auto; }
        .nav-links li { margin-bottom: 8px; }
        .nav-links a { display: flex; align-items: center; gap: 12px; color: #94a3b8; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; font-weight: 500; border-left: 3px solid transparent; }
        .nav-links a:hover, .nav-links a.active { background: linear-gradient(90deg, rgba(37, 99, 235, 0.2) 0%, transparent 100%); border-left: 3px solid #3b82f6; color: white; transform: translateX(4px); }
        .nav-links a.logout-btn { color: #ef4444; border-left: 3px solid transparent; }
        .nav-links a.logout-btn:hover { background: rgba(239, 68, 68, 0.1); border-left: 3px solid #ef4444; color: #f87171; }

        .main-content { flex: 1; display: flex; flex-direction: column; background: var(--bg-color); position: relative; }
        .scroll-area { flex: 1; padding: 30px; overflow-y: auto; }
        
        /* HEADER & NOTIFICATIONS */
        .top-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
        .header-title h1 { margin: 0; font-size: 1.8rem; font-weight: 800; letter-spacing: -0.5px; }
        .header-title p { margin: 5px 0 0; color: var(--text-muted); font-size: 0.95rem; }
        
        .header-tools { display: flex; align-items: center; gap: 15px; }
        .notify-bell { position: relative; font-size: 1.2rem; color: var(--text-muted); cursor: pointer; transition: 0.2s; padding: 8px; border-radius: 50%; background: var(--card-bg); border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; }
        .notify-bell:hover { color: var(--primary-color); background: var(--input-bg); }
        .bell-dot { position: absolute; top: 8px; right: 10px; width: 8px; height: 8px; background: #ef4444; border-radius: 50%; box-shadow: 0 0 0 2px var(--card-bg); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }

        /* --- 2. MASTER TABS --- */
        .lib-nav { display: flex; gap: 8px; background: var(--card-bg); padding: 8px; border-radius: 12px; border: 1px solid var(--border-color); margin-bottom: 35px; overflow-x: auto; scrollbar-width: none; box-shadow: 0 4px 10px rgba(0,0,0,0.02); }
        .lib-nav::-webkit-scrollbar { display: none; }
        .lib-tab { padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.95rem; color: var(--text-muted); transition: 0.2s; white-space: nowrap; display: flex; align-items: center; gap: 8px; border: 1px solid transparent; }
        .lib-tab:hover { background: var(--input-bg); color: var(--text-color); }
        .lib-tab.active { background: var(--primary-color); color: white; border-color: var(--primary-color); box-shadow: 0 4px 10px rgba(37,99,235,0.2); }
        
        .tab-content { display: none; animation: fadeIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* --- 3. DYNAMIC SYNC ENGINE UI & SEARCH BAR --- */
        .live-sync-banner { display: flex; justify-content: space-between; align-items: center; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(16, 185, 129, 0.2); padding: 15px 25px; border-radius: 12px; margin-bottom: 20px; }
        .sync-status { display: flex; align-items: center; gap: 10px; font-weight: 700; color: #10b981; font-size: 0.9rem; letter-spacing: 0.5px; text-transform: uppercase; }
        .sync-dot { width: 10px; height: 10px; background: #10b981; border-radius: 50%; box-shadow: 0 0 10px #10b981; animation: pulse 1.5s infinite; }
        .sync-time { font-size: 0.85rem; color: var(--text-muted); font-weight: 600; }

        .search-container { position: relative; margin-bottom: 30px; }
        .search-container i { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 1.1rem; }
        .search-input { width: 100%; padding: 18px 20px 18px 50px; border-radius: 12px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-color); font-family: inherit; font-size: 1rem; box-sizing: border-box; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.02); }
        .search-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        .no-results { display: none; text-align: center; padding: 40px; color: var(--text-muted); font-size: 1.1rem; font-weight: 600; grid-column: 1 / -1; background: var(--card-bg); border-radius: 12px; border: 1px dashed var(--border-color); }

        /* --- 4. PREMIUM GRID & CARDS --- */
        .opp-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; margin-bottom: 40px; }
        .opp-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; padding: 25px; transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); position: relative; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 4px 15px rgba(0,0,0,0.02); }
        .opp-card:hover { transform: translateY(-8px); border-color: rgba(37,99,235,0.4); box-shadow: 0 15px 35px rgba(37,99,235,0.1); }
        
        .card-bookmark { position: absolute; top: 15px; left: 15px; font-size: 1.2rem; color: var(--text-muted); cursor: pointer; transition: 0.2s; z-index: 5; background: var(--bg-color); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 1px solid var(--border-color); }
        .card-bookmark:hover { color: #f59e0b; border-color: #f59e0b; }
        .card-bookmark.saved { color: #f59e0b; background: rgba(245, 158, 11, 0.1); border-color: #f59e0b; }

        .card-tag { position: absolute; top: 20px; right: 20px; font-size: 0.7rem; font-weight: 800; padding: 5px 12px; border-radius: 20px; text-transform: uppercase; letter-spacing: 0.5px; }
        .tag-intl { background: rgba(147, 51, 234, 0.1); color: #9333ea; border: 1px solid rgba(147, 51, 234, 0.2); }
        .tag-local { background: rgba(16, 185, 129, 0.1); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.2); }
        .tag-urgent { background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.2); animation: blink 2s infinite; }
        
        .opp-icon { font-size: 2.2rem; margin: 15px 0; display: inline-block; padding: 12px; border-radius: 12px; background: var(--input-bg); align-self: flex-start; }
        .opp-title { font-size: 1.2rem; font-weight: 800; color: var(--text-color); margin: 0 0 10px; padding-right: 70px; line-height: 1.3; }
        .opp-desc { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 20px; line-height: 1.6; flex-grow: 1; }
        .opp-meta { font-size: 0.8rem; color: var(--text-muted); font-weight: 600; margin-bottom: 20px; display: flex; align-items: center; gap: 5px; }
        
        .btn-action { padding: 14px 20px; background: var(--primary-color); color: white; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.95rem; width: 100%; text-transform: uppercase; letter-spacing: 0.5px; text-decoration: none; }
        .btn-action:hover { background: #1d4ed8; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(37,99,235,0.3); }

        /* --- 5. MULTI-CHOICE WASSCE PREDICTOR --- */
        .wassce-box { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; padding: 40px; max-width: 1000px; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.03); }
        .wassce-header { text-align: center; margin-bottom: 40px; }
        .wassce-header h2 { margin: 0 0 10px; font-size: 2.2rem; color: var(--text-color); font-family: 'Playfair Display', serif; }
        
        .uni-choices-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 35px; padding: 25px; background: var(--input-bg); border-radius: 12px; border: 1px solid var(--border-color); }
        .choice-label { display: block; font-weight: 800; color: var(--primary-color); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        
        .form-row { display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 15px; align-items: center; }
        select { padding: 14px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-color); font-family: inherit; font-size: 0.95rem; width: 100%; outline: none; transition: 0.2s; font-weight: 600; cursor: pointer; }
        select:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(37,99,235,0.1); }
        
        .result-box { margin-top: 40px; display: none; animation: fadeIn 0.5s ease; }
        .ai-processing { text-align: center; padding: 40px; font-size: 1.2rem; color: var(--primary-color); font-weight: 700; display: none; }
        
        .uni-result-group { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 25px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.02); }
        .uni-result-header { background: rgba(37, 99, 235, 0.05); padding: 20px 25px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 15px; }
        .uni-result-header i { font-size: 2rem; color: var(--primary-color); }
        .uni-result-header h3 { margin: 0; color: var(--text-color); font-size: 1.2rem; }
        
        .course-list { list-style: none; padding: 20px 25px; margin: 0; display: flex; flex-direction: column; gap: 15px; }
        .course-list li { display: flex; justify-content: space-between; align-items: center; padding-bottom: 15px; border-bottom: 1px dashed var(--border-color); }
        .course-list li:last-child { border-bottom: none; padding-bottom: 0; }
        .c-name { font-size: 1.05rem; color: var(--text-color); font-weight: 700; margin-bottom: 4px; }
        .c-req { font-size: 0.85rem; color: var(--text-muted); }
        .c-badge { background: rgba(16,185,129,0.1); color: #10b981; padding: 6px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: 800; border: 1px solid rgba(16,185,129,0.2); }

        /* --- 6. üî• LOUIS EDU AI (Voice Activated) --- */
        .ai-hub-container { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; overflow: hidden; display: flex; flex-direction: column; height: 75vh; box-shadow: 0 10px 40px rgba(0,0,0,0.03); }
        .ai-hub-header { background: linear-gradient(135deg, #0f172a 0%, #1e1e2f 100%); color: white; padding: 25px; display: flex; align-items: center; gap: 15px; border-bottom: 3px solid #8b5cf6; }
        .ai-hub-header i { font-size: 2rem; color: #8b5cf6; }
        .ai-hub-header h2 { margin: 0; font-size: 1.4rem; font-family: 'Playfair Display', serif; }
        .ai-hub-header p { margin: 2px 0 0; color: #cbd5e1; font-size: 0.9rem; }
        
        .ai-chat-area { flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; background: var(--bg-color); }
        
        .ai-msg { display: flex; flex-direction: column; max-width: 85%; animation: fadeIn 0.3s ease; }
        .ai-msg.user { align-self: flex-end; align-items: flex-end; }
        .ai-msg.bot { align-self: flex-start; align-items: flex-start; }
        
        .ai-bubble { padding: 15px 20px; border-radius: 12px; font-size: 0.95rem; line-height: 1.6; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
        .ai-msg.user .ai-bubble { background: var(--primary-color); color: white; border-bottom-right-radius: 2px; }
        .ai-msg.bot .ai-bubble { background: var(--card-bg); color: var(--text-color); border: 1px solid var(--border-color); border-bottom-left-radius: 2px; }
        
        .ai-engine-buttons { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
        .engine-btn { padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 6px; text-decoration: none; transition: 0.2s; border: 1px solid transparent; }
        .engine-btn.google { background: rgba(234, 67, 53, 0.1); color: #ea4335; border-color: rgba(234, 67, 53, 0.2); }
        .engine-btn.google:hover { background: #ea4335; color: white; }
        .engine-btn.gpt { background: rgba(16, 163, 127, 0.1); color: #10a37f; border-color: rgba(16, 163, 127, 0.2); }
        .engine-btn.gpt:hover { background: #10a37f; color: white; }
        .engine-btn.gemini { background: rgba(66, 133, 244, 0.1); color: #4285f4; border-color: rgba(66, 133, 244, 0.2); }
        .engine-btn.gemini:hover { background: #4285f4; color: white; }
        
        .ai-input-area { padding: 20px; background: var(--card-bg); border-top: 1px solid var(--border-color); display: flex; gap: 15px; align-items: center; }
        .ai-input-area input { flex: 1; padding: 18px 20px; border-radius: 30px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--text-color); font-size: 1rem; outline: none; transition: 0.3s; }
        .ai-input-area input:focus { border-color: #8b5cf6; box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1); }
        .send-btn-circle { width: 55px; height: 55px; border-radius: 50%; background: linear-gradient(135deg, #8b5cf6, #6d28d9); color: white; border: none; font-size: 1.2rem; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3); display: flex; justify-content: center; align-items: center; flex-shrink: 0;}
        .send-btn-circle:hover { transform: scale(1.05); }
        
        /* Voice Mic Styling */
        .mic-btn { width: 50px; height: 50px; border-radius: 50%; background: var(--input-bg); color: var(--text-muted); border: 1px solid var(--border-color); font-size: 1.2rem; cursor: pointer; transition: 0.2s; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
        .mic-btn:hover { color: var(--primary-color); border-color: var(--primary-color); background: rgba(37,99,235,0.05); }
        .recording { color: #ef4444 !important; border-color: #ef4444 !important; animation: flash 1.5s infinite; }
        @keyframes flash { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); background: rgba(239, 68, 68, 0.1); } 70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); background: transparent;} 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); background: transparent;} }

        /* --- 7. UNIVERSAL MODALS --- */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.95); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        .modal-content { background: var(--card-bg); padding: 35px; border-radius: 16px; max-width: 450px; width: 90%; position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.5); border: 1px solid var(--border-color); }
        .close-modal { position: absolute; top: 15px; right: 20px; color: var(--text-muted); font-size: 2rem; cursor: pointer; transition: 0.2s; z-index: 10; }
        .close-modal:hover { color: #ef4444; }

        /* Document Reader Modal Specifics */
        .viewer-content { width: 90%; height: 95%; background: var(--card-bg); border-radius: 12px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.5); position: relative; }
        .viewer-header { padding: 15px 25px; background: #0f172a; color: white; display: flex; justify-content: space-between; align-items: center; }
        .smart-text-reader { flex: 1; padding: 60px 10%; overflow-y: auto; background: #faf9f6; color: #333; font-family: 'Playfair Display', serif; font-size: 1.15rem; line-height: 1.9; }
        .smart-text-reader h1 { font-size: 2.5rem; border-bottom: 2px solid #ddd; padding-bottom: 20px; color: #111; text-align: center; }
        .smart-text-reader h2 { font-family: 'Inter', sans-serif; font-size: 0.9rem; text-align: center; color: #666; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; }

        /* Video Player Modal Specifics */
        .video-content { width: 800px; max-width: 95%; background: #000; border-radius: 12px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.8); position: relative; }
        .video-placeholder { width: 100%; aspect-ratio: 16/9; background: url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?q=80&w=1000&auto=format&fit=crop') center/cover; display: flex; align-items: center; justify-content: center; position: relative; }
        .video-placeholder::after { content: ''; position: absolute; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .play-button-large { position: relative; z-index: 2; width: 80px; height: 80px; background: rgba(239,68,68,0.9); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; cursor: pointer; transition: 0.2s; box-shadow: 0 0 30px rgba(239,68,68,0.6); border: none; }
        .play-button-large:hover { transform: scale(1.1); background: #dc2626; }

        /* MoMo Checkout Specifics */
        .momo-input { width: 100%; padding: 15px; font-size: 1.2rem; text-align: center; letter-spacing: 2px; font-weight: 800; border: 2px solid #e2e8f0; border-radius: 8px; margin: 20px 0; outline: none; transition: 0.3s; background: var(--input-bg); color: var(--text-color); box-sizing: border-box;}
        .momo-input:focus { border-color: #f59e0b; box-shadow: 0 0 10px rgba(245, 158, 11, 0.2); }

        /* Notification Toast */
        .toast { position: fixed; bottom: 30px; right: 30px; background: #10b981; color: white; padding: 15px 25px; border-radius: 8px; font-weight: 600; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 9999; transform: translateY(100px); opacity: 0; transition: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .toast.show { transform: translateY(0); opacity: 1; }

        /* Mobile Adjustments */
        .mobile-menu-btn { display: none; font-size: 1.5rem; cursor: pointer; color: var(--text-color); }
        .sidebar-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 998; backdrop-filter: blur(3px); }

        @media (max-width: 900px) { 
            .mobile-menu-btn { display: block; }
            .sidebar { position: fixed; height: 100%; left: -280px; box-shadow: none; }
            .sidebar.mobile-open { left: 0; box-shadow: 10px 0 30px rgba(0,0,0,0.5); }
            .sidebar-overlay.mobile-open { display: block; }
            .uni-choices-grid { grid-template-columns: 1fr; }
            .form-row { grid-template-columns: 1fr; gap: 10px; } 
        }
    </style>
</head>
<body>

    <div class="sidebar-overlay" onclick="toggleMobileSidebar()"></div>
    
    <div id="toast" class="toast"><i class="fas fa-check-circle"></i> Saved to Cloud Profile!</div>

    <div id="paymentModal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <span class="close-modal" onclick="closeModals()">&times;</span>
            <div style="background: rgba(245, 158, 11, 0.1); width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: #f59e0b; font-size: 2.5rem;">
                <i class="fas fa-mobile-alt"></i>
            </div>
            <h2 style="margin: 0 0 10px; color: var(--text-color);">Secure E-Voucher Checkout</h2>
            <p style="color: var(--text-muted); font-size: 0.95rem; margin-bottom: 25px;">Enter your Mobile Money number to authorize a payment of <strong>GHS 250.00</strong> for the official university application forms.</p>
            
            <div style="text-align: left; margin-bottom: 5px; font-weight: 700; color: var(--text-color); font-size: 0.85rem; text-transform: uppercase;">Mobile Network Operator</div>
            <select style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--text-color); font-weight: 600; outline: none; margin-bottom: 10px;">
                <option>MTN Mobile Money</option>
                <option>Telecel Cash</option>
                <option>AT Money</option>
            </select>

            <input type="text" class="momo-input" placeholder="e.g. 024XXXXXXX" maxlength="10" id="momoNumber">
            
            <button class="btn-action" style="background: #10b981; font-size: 1.1rem; padding: 16px;" id="payBtn" onclick="processPayment()">
                <i class="fas fa-lock"></i> Authorize Payment
            </button>
            <p style="margin-top: 20px; font-size: 0.8rem; color: var(--text-muted);"><i class="fas fa-shield-alt"></i> Secured by National Portal Gateway</p>
        </div>
    </div>

    <div id="docModal" class="modal">
        <div class="viewer-content">
            <div class="viewer-header">
                <div>
                    <h3 id="docTitle" style="margin: 0; font-size: 1.2rem;">Loading Document...</h3>
                    <span style="font-size: 0.85rem; color: #cbd5e1;">National Portal Secure Reader</span>
                </div>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <button class="btn-action" style="background: rgba(255,255,255,0.1); padding: 8px 15px; font-size: 0.85rem;" onclick="alert('This document requires an active institutional subscription to download.')"><i class="fas fa-download"></i> Download PDF</button>
                    <span class="close-modal" style="position: static; color: white;" onclick="closeModals()">&times;</span>
                </div>
            </div>
            <div id="smartReader" class="smart-text-reader"></div>
        </div>
    </div>

    <div id="videoModal" class="modal">
        <div class="video-content">
            <span class="close-modal" onclick="closeModals()" style="color: white; z-index: 10;">&times;</span>
            <div class="video-placeholder" id="vid-cover">
                <button class="play-button-large" id="play-btn" onclick="playPremiumVideo()"><i class="fas fa-play" style="margin-left: 5px;"></i></button>
                <div id="vid-loading" style="display:none; position: absolute; z-index: 3; color: white; text-align: center;">
                    <i class="fas fa-circle-notch fa-spin" style="font-size: 3rem; margin-bottom: 10px;"></i>
                    <p style="font-weight: bold; letter-spacing: 1px;">Authorizing Stream...</p>
                </div>
            </div>
            <div style="padding: 20px; background: #0f172a; color: white;">
                <h3 id="videoTitle" style="margin: 0 0 5px; font-size: 1.3rem;">Masterclass Loading...</h3>
                <p id="videoDesc" style="margin: 0; color: #94a3b8; font-size: 0.9rem;">Exclusive content for National Portal students.</p>
            </div>
        </div>
    </div>

    <div class="wrapper">
        <aside class="sidebar">
            <div class="sidebar-header"><i class="fas fa-university"></i> Student Portal <i class="fas fa-times mobile-menu-btn" style="margin-left: auto; color: white;" onclick="toggleMobileSidebar()"></i></div>
            
            <div class="user-profile-widget">
                <img id="sidebar-pic" src="https://via.placeholder.com/70" class="user-avatar" alt="Profile">
                <div id="sidebar-name" style="font-weight: 600; color: white; font-size: 0.95rem;">User</div>
                <div id="sidebar-role" style="font-size: 0.75rem; color: #94a3b8; margin-top: 2px;">Loading...</div>
            </div>

            <ul class="nav-links">
                <li><a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="profile.html"><i class="fas fa-user"></i> My Profile</a></li>
                <li><a href="courses.html"><i class="fas fa-book-open"></i> Courses</a></li>
                <li><a href="gpa.html"><i class="fas fa-calculator"></i> GPA Calc</a></li>
                <li><a href="library.html"><i class="fas fa-book"></i> Library</a></li>
                <li><a href="connect.html"><i class="fas fa-comments"></i> Connect</a></li>
                <li><a href="opportunities.html" class="active"><i class="fas fa-briefcase"></i> Opportunities Hub</a></li>
               <li style="margin-top: 20px;">
    <a href="#" onclick="executeSecureLogout(event)" style="color: #ef4444; border-left-color: transparent;">
        <i class="fas fa-sign-out-alt"></i> Logout
    </a>
</li>
            </ul>
        </aside>

        <main class="main-content">
            <div class="scroll-area">
                
                <header class="top-header">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <i class="fas fa-bars mobile-menu-btn" onclick="toggleMobileSidebar()"></i>
                        <div class="header-title">
                            <h1>Opportunities & Pathways</h1>
                            <p>Global Scholarships, Career Placement & AI Admissions.</p>
                        </div>
                    </div>
                    <div class="header-tools">
                        <div class="notify-bell" onclick="alert('New Sync Complete: Advanced opportunities added.')"><i class="fas fa-bell"></i><span class="bell-dot"></span></div>
                        <div class="theme-wrapper"><select onchange="setTheme(this.value)" style="padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-color); cursor: pointer; font-weight: 500;"><option value="system">üíª System</option><option value="light">‚òÄÔ∏è Light</option><option value="dark">üåô Dark</option></select></div>
                    </div>
                </header>

                <div class="lib-nav">
                    <div class="lib-tab active" onclick="switchTab('ai-search', this)" style="background: linear-gradient(135deg, #8b5cf6, #6d28d9); color: white; border: none; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);"><i class="fas fa-magic"></i> Louis Edu AI</div>
                    
                    <div class="lib-tab" onclick="switchTab('scholarships', this)"><i class="fas fa-graduation-cap"></i> Scholarships</div>
                    <div class="lib-tab" onclick="switchTab('career', this)"><i class="fas fa-briefcase"></i> Internships & NSS</div>
                    <div class="lib-tab" onclick="switchTab('courses', this)"><i class="fas fa-laptop-code"></i> Certifications</div>
                    <div class="lib-tab" onclick="switchTab('admissions', this)"><i class="fas fa-robot"></i> WASSCE Predictor</div>
                    <div class="lib-tab" onclick="switchTab('abroad', this)"><i class="fas fa-plane-departure"></i> Study Abroad</div>
                </div>

                <div id="tab-ai-search" class="tab-content active">
                    <div class="ai-hub-container">
                        <div class="ai-hub-header">
                            <i class="fas fa-brain"></i>
                            <div>
                                <h2>Louis Edu AI</h2>
                                <p>Ask about scholarships, NSS postings, internships, or global study opportunities.</p>
                            </div>
                        </div>
                        
                        <div class="ai-chat-area" id="ai-chat-box">
                            <div class="ai-msg bot">
                                <div class="ai-bubble">
                                    <strong>Greetings, <span id="ai-greeting-name">Student</span>!</strong> üëã<br><br>
                                    I am <strong>Louis Edu AI</strong>, your dedicated academic assistant. What educational opportunities are you looking for today? You can search for specific programs, ask for application advice, or request links to external search engines. <br><br><em>(Hint: You can type your request, or click the microphone to speak to me directly!)</em>
                                </div>
                            </div>
                        </div>

                        <div class="ai-input-area">
                            <button id="mic-btn" class="mic-btn" onclick="startVoiceRecognition()" title="Click to Speak"><i class="fas fa-microphone"></i></button>
                            <input type="text" id="ai-input" placeholder="Type or speak your request..." onkeypress="handleAIPress(event)">
                            <button class="send-btn-circle" onclick="triggerAIResponse()"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>

                <div id="tab-scholarships" class="tab-content">
                    <div class="live-sync-banner">
                        <div class="sync-status"><div class="sync-dot"></div> Data Link Active</div>
                        <div class="sync-time" id="scholarship-sync-time">Synchronized Just Now</div>
                    </div>
                    
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" id="search-scholars" placeholder="Search for scholarships, grants, or specific programs..." onkeyup="filterCards('search-scholars', 'scholarship-grid')">
                    </div>

                    <div class="opp-grid" id="scholarship-grid">
                        <div class="no-results">No opportunities match your search.</div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('Scholarships Secretariat', 'National', 'https://scholarships.gov.gh/', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-local">National</span>
                            <div class="opp-icon" style="color: #10b981;"><i class="fas fa-landmark"></i></div>
                            <h3 class="opp-title">Scholarships Secretariat</h3>
                            <div class="opp-meta"><i class="fas fa-globe-africa"></i> Government of Ghana</div>
                            <p class="opp-desc">Official portal for local and international scholarships managed by the government.</p>
                            <a href="https://scholarships.gov.gh/" target="_blank" class="btn-action"><i class="fas fa-external-link-alt"></i> Official Portal</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('GETFund Scholarship', 'Institutional', 'https://scholarships.getfund.gov.gh/', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-local">Institutional</span>
                            <div class="opp-icon" style="color: #2563eb;"><i class="fas fa-building"></i></div>
                            <h3 class="opp-title">GETFund Scholarship</h3>
                            <div class="opp-meta"><i class="fas fa-map-marker-alt"></i> Ghana</div>
                            <p class="opp-desc">Financial assistance for brilliant but needy Ghanaian students enrolled in accredited local institutions.</p>
                            <a href="https://scholarships.getfund.gov.gh/" target="_blank" class="btn-action"><i class="fas fa-file-signature"></i> Apply via GETFund</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('GNPC Foundation', 'Corporate', 'https://www.gnpcghana.com/gnpc-foundation', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-local">Corporate</span>
                            <div class="opp-icon" style="color: #f59e0b;"><i class="fas fa-gas-pump"></i></div>
                            <h3 class="opp-title">GNPC Foundation</h3>
                            <div class="opp-meta"><i class="fas fa-briefcase"></i> Corporate Social Investment</div>
                            <p class="opp-desc">Scholarships targeting STEM, special needs, and tertiary students across Ghana.</p>
                            <a href="https://www.gnpcghana.com/gnpc-foundation" target="_blank" class="btn-action" style="background: #f59e0b; color: #0f172a;"><i class="fas fa-link"></i> Visit Foundation</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('MTN Ghana Bright Scholars', 'Urgent', 'https://scholarship.mtn.com.gh/', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-urgent">Corporate</span>
                            <div class="opp-icon" style="color: #ef4444;"><i class="fas fa-mobile-alt"></i></div>
                            <h3 class="opp-title">MTN Ghana Bright Scholars</h3>
                            <div class="opp-meta"><i class="fas fa-bolt"></i> High Demand</div>
                            <p class="opp-desc">Corporate scheme supporting tertiary students pursuing STEM and Business programs. Covers tuition and stipends.</p>
                            <a href="https://scholarship.mtn.com.gh/" target="_blank" class="btn-action" style="background: #ef4444;"><i class="fas fa-bolt"></i> Fast-Track Apply</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('Unicaf Scholarships', 'International', 'https://university.unicaf.org/scholarships/', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-intl">International</span>
                            <div class="opp-icon" style="color: #9333ea;"><i class="fas fa-globe"></i></div>
                            <h3 class="opp-title">Unicaf Scholarships</h3>
                            <div class="opp-meta"><i class="fas fa-laptop"></i> Online & Blended</div>
                            <p class="opp-desc">Generous scholarships to earn internationally recognized degrees from partner universities worldwide.</p>
                            <a href="https://university.unicaf.org/scholarships/" target="_blank" class="btn-action" style="background: #9333ea;"><i class="fas fa-external-link-alt"></i> View Unicaf</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('NUGS Scholarship Portal', 'National', 'https://nugs.org.gh/nugs-scholarship-portal/', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-local">National</span>
                            <div class="opp-icon" style="color: #0f172a;"><i class="fas fa-users"></i></div>
                            <h3 class="opp-title">NUGS Scholarship Portal</h3>
                            <div class="opp-meta"><i class="fas fa-hands-helping"></i> Student Union</div>
                            <p class="opp-desc">Financial aid and support structures managed directly by the National Union of Ghana Students.</p>
                            <a href="https://nugs.org.gh/nugs-scholarship-portal/" target="_blank" class="btn-action" style="background: #0f172a;"><i class="fas fa-arrow-right"></i> NUGS Portal</a>
                        </div>
                    </div>
                </div>

                <div id="tab-career" class="tab-content">
                    <div class="live-sync-banner" style="background: rgba(59, 130, 246, 0.05); border-color: rgba(59, 130, 246, 0.2);">
                        <div class="sync-status" style="color: #3b82f6;"><div class="sync-dot" style="background:#3b82f6; box-shadow: 0 0 10px #3b82f6;"></div> Corporate Link Active</div>
                        <div class="sync-time" id="career-sync-time">Synchronized Just Now</div>
                    </div>

                    <div class="search-container">
                        <i class="fas fa-briefcase"></i>
                        <input type="text" class="search-input" id="search-career" placeholder="Search for companies, roles, or NSS placements (e.g. 'Software', 'Tullow')..." onkeyup="filterCards('search-career', 'career-grid')">
                    </div>

                    <div class="opp-grid" id="career-grid">
                        <div class="no-results">No opportunities match your search.</div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('Jobberman Ghana', 'Platform', 'https://www.jobberman.com.gh/jobs/internship-graduate', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-local">Platform</span>
                            <div class="opp-icon" style="color: #2563eb;"><i class="fas fa-search-dollar"></i></div>
                            <h3 class="opp-title">Jobberman Ghana</h3>
                            <div class="opp-meta"><i class="fas fa-briefcase"></i> Graduate Internships</div>
                            <p class="opp-desc">The leading job portal in Ghana featuring daily updates on graduate and student internship roles.</p>
                            <a href="https://www.jobberman.com.gh/jobs/internship-graduate" target="_blank" class="btn-action"><i class="fas fa-external-link-alt"></i> Browse Jobberman</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('LinkedIn Jobs', 'Platform', 'https://gh.linkedin.com/jobs/internship-jobs', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-local">Platform</span>
                            <div class="opp-icon" style="color: #0077b5;"><i class="fab fa-linkedin"></i></div>
                            <h3 class="opp-title">LinkedIn Jobs (Ghana)</h3>
                            <div class="opp-meta"><i class="fas fa-network-wired"></i> Professional Network</div>
                            <p class="opp-desc">Direct feed for internship opportunities posted by top companies and recruiters in Ghana.</p>
                            <a href="https://gh.linkedin.com/jobs/internship-jobs" target="_blank" class="btn-action" style="background: #0077b5;"><i class="fab fa-linkedin-in"></i> View on LinkedIn</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('AmaliTech Immersive', 'Tech', 'https://amalitech.com/immersive-internship-programme/', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-intl">Tech</span>
                            <div class="opp-icon" style="color: #f59e0b;"><i class="fas fa-laptop-code"></i></div>
                            <h3 class="opp-title">AmaliTech Immersive</h3>
                            <div class="opp-meta"><i class="fas fa-code"></i> Software & IT</div>
                            <p class="opp-desc">Intensive internship programme for tech enthusiasts offering real-world project experience.</p>
                            <a href="https://amalitech.com/immersive-internship-programme/" target="_blank" class="btn-action" style="background: #f59e0b; color: #0f172a;"><i class="fas fa-link"></i> AmaliTech Hub</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('UN Career & UNICEF', 'Global', 'https://uncareer.net/country/Ghana', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-intl">Global</span>
                            <div class="opp-icon" style="color: #10b981;"><i class="fas fa-globe"></i></div>
                            <h3 class="opp-title">UN Career & UNICEF</h3>
                            <div class="opp-meta"><i class="fas fa-hands-helping"></i> International Dev</div>
                            <p class="opp-desc">Prestigious internship pathways with United Nations agencies operating within Ghana.</p>
                            <div style="display: flex; gap: 10px; width: 100%;">
                                <a href="https://uncareer.net/country/Ghana" target="_blank" class="btn-action" style="background: #10b981; font-size: 0.8rem; padding: 10px;"><i class="fas fa-globe"></i> UN</a>
                                <a href="https://www.unicef.org/careers/internships" target="_blank" class="btn-action" style="background: #3b82f6; font-size: 0.8rem; padding: 10px;"><i class="fas fa-child"></i> UNICEF</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-courses" class="tab-content">
                    <div class="live-sync-banner" style="background: rgba(147, 51, 234, 0.05); border-color: rgba(147, 51, 234, 0.2);">
                        <div class="sync-status" style="color: #9333ea;"><div class="sync-dot" style="background:#9333ea; box-shadow: 0 0 10px #9333ea;"></div> EdTech Link Active</div>
                        <div class="sync-time" id="courses-sync-time">Synchronized Just Now</div>
                    </div>

                    <div class="search-container">
                        <i class="fas fa-laptop-code"></i>
                        <input type="text" class="search-input" id="search-courses" placeholder="Search for online platforms, Google certs, or Harvard free courses..." onkeyup="filterCards('search-courses', 'courses-grid')">
                    </div>

                    <div class="opp-grid" id="courses-grid">
                        <div class="no-results">No opportunities match your search.</div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('Coursera', 'Global', 'https://www.coursera.org/courses', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-intl">Global</span>
                            <div class="opp-icon" style="color: #2563eb;"><i class="fas fa-graduation-cap"></i></div>
                            <h3 class="opp-title">Coursera</h3>
                            <div class="opp-meta"><i class="fas fa-certificate"></i> Free & Paid Certs</div>
                            <p class="opp-desc">Access thousands of courses from top universities and companies like IBM and Meta.</p>
                            <a href="https://www.coursera.org/courses" target="_blank" class="btn-action"><i class="fas fa-external-link-alt"></i> Browse Coursera</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('Grow with Google', 'Tech', 'https://grow.google/intl/ALL_in/learn-skills/', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-intl">Tech</span>
                            <div class="opp-icon" style="color: #f59e0b;"><i class="fab fa-google"></i></div>
                            <h3 class="opp-title">Grow with Google</h3>
                            <div class="opp-meta"><i class="fas fa-laptop-code"></i> Professional Certs</div>
                            <p class="opp-desc">High-impact certificates in Data Analytics, IT Support, UX Design, and Project Management.</p>
                            <a href="https://grow.google/intl/ALL_in/learn-skills/" target="_blank" class="btn-action" style="background: #f59e0b; color: #0f172a;"><i class="fab fa-google"></i> Google Hub</a>
                        </div>
                        <div class="opp-card">
                            <div class="card-bookmark" onclick="saveToCloudOpps('Harvard Free Courses', 'Ivy League', 'https://pll.harvard.edu/catalog/free', this)"><i class="far fa-bookmark"></i></div>
                            <span class="card-tag tag-intl">Ivy League</span>
                            <div class="opp-icon" style="color: #ef4444;"><i class="fas fa-university"></i></div>
                            <h3 class="opp-title">Harvard Free Courses</h3>
                            <div class="opp-meta"><i class="fas fa-book-reader"></i> Harvard University</div>
                            <p class="opp-desc">Take free online courses from Harvard, including the world-famous CS50 computer science series.</p>
                            <a href="https://pll.harvard.edu/catalog/free" target="_blank" class="btn-action" style="background: #ef4444;"><i class="fas fa-award"></i> View Harvard Catalog</a>
                        </div>
                    </div>
                </div>

                <div id="tab-admissions" class="tab-content">
                    <div class="wassce-box">
                        <div class="wassce-header">
                            <h2><i class="fas fa-brain" style="color: var(--primary-color);"></i> WASSCE AI Algorithm</h2>
                            <p style="color: var(--text-muted); max-width: 700px; margin: 0 auto; line-height: 1.6;">Select up to 3 tertiary institutions and input your grades. Our AI will cross-reference the 2026 National Database and instantly generate all the specific courses you are eligible to pursue at each chosen university.</p>
                        </div>
                        
                        <div class="uni-choices-grid">
                            <div>
                                <label class="choice-label"><i class="fas fa-medal"></i> 1st Choice Institution</label>
                                <select id="uni-1">
                                    <option value="KNUST">Kwame Nkrumah Univ. of Sci & Tech (KNUST)</option>
                                    <option value="UG Legon">University of Ghana (UG Legon)</option>
                                    <option value="UCC">University of Cape Coast (UCC)</option>
                                </select>
                            </div>
                            <div>
                                <label class="choice-label" style="color: #f59e0b;"><i class="fas fa-medal"></i> 2nd Choice Institution</label>
                                <select id="uni-2">
                                    <option value="UG Legon">University of Ghana (UG Legon)</option>
                                    <option value="KNUST">Kwame Nkrumah Univ. of Sci & Tech (KNUST)</option>
                                    <option value="UCC">University of Cape Coast (UCC)</option>
                                </select>
                            </div>
                            <div>
                                <label class="choice-label" style="color: #10b981;"><i class="fas fa-medal"></i> 3rd Choice Institution</label>
                                <select id="uni-3">
                                    <option value="UCC">University of Cape Coast (UCC)</option>
                                    <option value="UG Legon">University of Ghana (UG Legon)</option>
                                    <option value="KNUST">Kwame Nkrumah Univ. of Sci & Tech (KNUST)</option>
                                </select>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px;">
                            <div>
                                <h4 style="margin-top: 0; color: var(--text-color); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1px;">Core Subjects</h4>
                                <div class="form-row"><select><option>Core Mathematics</option></select><select><option>A1</option><option>B2</option><option>B3</option><option>C4</option><option>C5</option><option>C6</option></select></div>
                                <div class="form-row"><select><option>English Language</option></select><select><option>A1</option><option>B2</option><option>B3</option><option>C4</option><option>C5</option><option>C6</option></select></div>
                                <div class="form-row"><select><option>Integrated Science</option></select><select><option>A1</option><option>B2</option><option>B3</option><option>C4</option><option>C5</option><option>C6</option></select></div>
                                <div class="form-row"><select><option>Social Studies</option></select><select><option>A1</option><option>B2</option><option>B3</option><option>C4</option><option>C5</option><option>C6</option></select></div>
                            </div>
                            <div>
                                <h4 style="margin-top: 0; color: var(--text-color); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1px;">Top 3 Electives</h4>
                                <div class="form-row"><select><option>Physics</option><option>Economics</option><option>Elective Math</option></select><select><option>A1</option><option>B2</option><option>B3</option><option>C4</option><option>C5</option></select></div>
                                <div class="form-row"><select><option>Chemistry</option><option>Business Mgt</option><option>French</option></select><select><option>A1</option><option>B2</option><option>B3</option><option>C4</option><option>C5</option></select></div>
                                <div class="form-row"><select><option>Elective Math</option><option>Accounting</option><option>Literature</option></select><select><option>A1</option><option>B2</option><option>B3</option><option>C4</option><option>C5</option></select></div>
                            </div>
                        </div>
                        
                        <button class="btn-action" id="ai-btn" style="width: 100%; padding: 20px; font-size: 1.15rem; border-radius: 12px; box-shadow: 0 10px 25px rgba(37,99,235,0.3);" onclick="runWassceAI()"><i class="fas fa-microchip"></i> Execute AI Cross-Reference</button>

                        <div id="ai-loading" class="ai-processing">
                            <i class="fas fa-cog fa-spin" style="font-size: 3rem; margin-bottom: 15px;"></i><br>
                            Querying National Admissions Database...
                        </div>

                        <div id="wassce-result" class="result-box">
                            <h2 style="text-align: center; margin: 0 0 30px; color: #10b981;"><i class="fas fa-check-circle"></i> Eligibility Matrix Generated</h2>
                            
                            <div id="dynamic-results-container"></div>
                            
                            <div style="margin-top: 40px; padding: 25px; background: var(--input-bg); border-radius: 12px; border: 2px dashed var(--primary-color); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
                                <div>
                                    <strong style="color: var(--text-color); font-size: 1.2rem; display: block; margin-bottom: 5px;">Proceed to Formal Application</strong>
                                    <span style="color: var(--text-muted);">Purchase official University E-Vouchers securely via Mobile Money.</span>
                                </div>
                                <button class="btn-action" style="width: auto; padding: 15px 30px; font-size: 1.1rem;" onclick="openPaymentModal()"><i class="fas fa-mobile-alt"></i> Buy E-Voucher Now</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-abroad" class="tab-content">
                    <div style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-radius: 16px; padding: 40px; color: white; margin-bottom: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                        <h2 style="font-size: 2.2rem; margin: 0 0 10px; font-family: 'Playfair Display', serif;">Global Education Pathways</h2>
                        <p style="font-size: 1.1rem; color: #cbd5e1; max-width: 600px; line-height: 1.6; margin: 0;">Access expert guidance on securing fully-funded admissions, navigating visa protocols, and securing application fee waivers across North America and Europe.</p>
                    </div>

                    <h3 style="margin-bottom: 20px; font-size: 1.3rem; border-bottom: 2px solid var(--border-color); padding-bottom: 10px;"><i class="fas fa-folder-open" style="color: var(--primary-color);"></i> The Application Document Vault</h3>
                    
                    <ul style="list-style: none; padding: 0; margin: 0 0 40px;">
                        <li style="display: flex; align-items: center; justify-content: space-between; padding: 15px; border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 10px; background: var(--card-bg); transition: 0.2s;" onmouseover="this.style.transform='translateX(5px)'" onmouseout="this.style.transform='translateX(0)'">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 45px; height: 45px; background: rgba(239, 68, 68, 0.1); color: #ef4444; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;"><i class="fas fa-file-pdf"></i></div>
                                <div>
                                    <strong style="color: var(--text-color); font-size: 1.1rem;">Mastering the Statement of Purpose (SOP)</strong>
                                    <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 4px;">A definitive guide with 5 successful samples from Ivy League admits.</div>
                                </div>
                            </div>
                            <button class="btn-action" style="background: transparent; border: 2px solid var(--border-color); color: var(--text-color); width: auto;" onclick="openDoc('Mastering the Statement of Purpose')">Read Guide</button>
                        </li>
                    </ul>

                    <h3 style="margin-bottom: 20px; font-size: 1.3rem; border-bottom: 2px solid var(--border-color); padding-bottom: 10px;"><i class="fas fa-video" style="color: #ef4444;"></i> Expert Masterclasses</h3>
                    <div class="opp-grid">
                        <div class="opp-card" style="text-align: center; padding: 0;">
                            <img src="https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=600&auto=format&fit=crop" style="width:100%; height:200px; object-fit:cover; border-bottom:1px solid var(--border-color);" alt="Fred Effect">
                            <div style="padding: 20px;">
                                <h3 style="margin: 0 0 5px; color: var(--text-color);">The Fred Effect</h3>
                                <p style="color: var(--primary-color); font-weight: 700; font-size: 0.85rem; margin: 0 0 15px; text-transform: uppercase;">US Admissions Strategist</p>
                                <button class="btn-action" style="background: #ef4444;" onclick="openVideo('The Fred Effect: Securing Graduate Assistantships', 'Strategic advice on funding your US Master\\'s degree.')"><i class="fab fa-youtube"></i> Watch Masterclass</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        // --- 1. FIREBASE INITIALIZATION & SYNC ---
        let userDbKey = null;

        document.addEventListener('DOMContentLoaded', () => {
            const userName = localStorage.getItem('portal-user-name') || 'Student';
            const pic = localStorage.getItem('portal-avatar');
            const email = localStorage.getItem('portal-user-email');
            
            // Sync Sidebar UI
            if(document.getElementById('sidebar-name')) document.getElementById('sidebar-name').innerText = userName;
            if(document.getElementById('ai-greeting-name')) document.getElementById('ai-greeting-name').innerText = userName.split(' ')[0];
            if(pic && document.getElementById('sidebar-pic')) document.getElementById('sidebar-pic').src = pic;

            // Fetch specific User ID for cloud saving
            if (email) {
                db.ref('users').orderByChild('email').equalTo(email).once('value', (snapshot) => {
                    if(snapshot.exists()) {
                        snapshot.forEach(child => { userDbKey = child.key; });
                    }
                });
            }
        });

        function toggleMobileSidebar() {
            document.querySelector('.sidebar').classList.toggle('mobile-open');
            document.querySelector('.sidebar-overlay').classList.toggle('mobile-open');
        }

        function switchTab(tabId, el) {
            document.querySelectorAll('.lib-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            document.getElementById(`tab-${tabId}`).classList.add('active');
        }

        setInterval(() => {
            const now = new Date();
            const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            if(document.getElementById('scholarship-sync-time')) document.getElementById('scholarship-sync-time').innerText = "Last checked: " + timeStr;
            if(document.getElementById('career-sync-time')) document.getElementById('career-sync-time').innerText = "Last checked: " + timeStr;
            if(document.getElementById('courses-sync-time')) document.getElementById('courses-sync-time').innerText = "Last checked: " + timeStr;
        }, 15000); 

        // --- 2. SEARCH ENGINE ---
        function filterCards(inputId, gridId) {
            let input = document.getElementById(inputId).value.toLowerCase();
            let grid = document.getElementById(gridId);
            let cards = grid.getElementsByClassName('opp-card');
            let hasVisible = false;
            
            for(let i = 0; i < cards.length; i++) {
                let textContent = cards[i].innerText.toLowerCase();
                if(textContent.includes(input)) {
                    cards[i].style.display = "";
                    hasVisible = true;
                } else {
                    cards[i].style.display = "none";
                }
            }
            
            let noRes = grid.querySelector('.no-results');
            if(!hasVisible) {
                noRes.style.display = 'block';
            } else {
                noRes.style.display = 'none';
            }
        }

        // --- 3. CLOUD BOOKMARKING SYSTEM ---
        function saveToCloudOpps(title, type, link, iconElement) {
            if (!userDbKey) {
                alert("Please ensure you are fully logged in to save opportunities.");
                return;
            }

            const icon = iconElement.querySelector('i');
            
            // Toggle UI immediately
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                iconElement.classList.add('saved');
                
                // Push to Firebase
                db.ref('users/' + userDbKey + '/saved_opps').push({
                    title: title,
                    type: type,
                    link: link,
                    date: new Date().toISOString()
                });

                // Show Toast
                const toast = document.getElementById('toast');
                toast.classList.add('show');
                setTimeout(() => { toast.classList.remove('show'); }, 3000);

            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                iconElement.classList.remove('saved');
            }
        }

        // --- 4. üî• LOUIS EDU AI (VOICE & TEXT) ---
        function handleAIPress(e) {
            if (e.key === 'Enter') triggerAIResponse();
        }

        function triggerAIResponse() {
            const inputEl = document.getElementById('ai-input');
            const query = inputEl.value.trim();
            if (!query) return;

            const chatBox = document.getElementById('ai-chat-box');

            // 1. Render User Message
            chatBox.innerHTML += `
                <div class="ai-msg user">
                    <div class="ai-bubble">${query}</div>
                </div>
            `;
            inputEl.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;

            // 2. Render Loading State
            const loadingId = 'loading-' + Date.now();
            chatBox.innerHTML += `
                <div class="ai-msg bot" id="${loadingId}">
                    <div class="ai-bubble"><i class="fas fa-circle-notch fa-spin"></i> Louis Edu AI is analyzing your query...</div>
                </div>
            `;
            chatBox.scrollTop = chatBox.scrollHeight;

            // 3. Simulate AI Processing & Return
            setTimeout(() => {
                const loadingEl = document.getElementById(loadingId);
                if(loadingEl) loadingEl.remove();

                const response = generateAIContent(query);
                
                chatBox.innerHTML += `
                    <div class="ai-msg bot">
                        <div class="ai-bubble">
                            ${response.text}
                            <div class="ai-engine-buttons">
                                <a href="${response.google}" target="_blank" class="engine-btn google"><i class="fab fa-google"></i> Google Search</a>
                                <a href="https://chat.openai.com/?q=${encodeURIComponent(query)}" target="_blank" class="engine-btn gpt"><i class="fas fa-robot"></i> Ask ChatGPT</a>
                                <a href="https://gemini.google.com/app?q=${encodeURIComponent(query)}" target="_blank" class="engine-btn gemini"><i class="fas fa-sparkles"></i> Ask Gemini</a>
                            </div>
                        </div>
                    </div>
                `;
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 1800);
        }

        function generateAIContent(q) {
            const lowerQ = q.toLowerCase();
            let text = "";
            let googleQuery = encodeURIComponent(q);

            if (lowerQ.includes('scholarship') || lowerQ.includes('fund')) {
                text = "Based on current global data, securing fully funded scholarships requires early preparation (ideally 12-18 months in advance). Key portals to monitor include the <strong>Erasmus+ Catalogue</strong> for Europe, <strong>Mastercard Foundation</strong> for Africa/US, and direct University departmental pages. <br><br>I have generated direct search links below for you to cross-reference this query with dedicated LLMs and search engines:";
                googleQuery = encodeURIComponent(q + " fully funded scholarships international students");
            } else if (lowerQ.includes('intern') || lowerQ.includes('nss')) {
                text = "For internships and National Service (NSS) placements, timing is critical. Many corporate entities in Ghana (like Tullow, MTN, and Nestl√©) open their graduate trainee portals between March and May. Ensure your LinkedIn profile is updated to 'Open to Work'. <br><br>Use the external engines below to find specific active postings:";
                googleQuery = encodeURIComponent(q + " graduate internships ghana application portal");
            } else if (lowerQ.includes('study abroad') || lowerQ.includes('visa')) {
                text = "Studying abroad involves navigating complex visa and funding protocols. If you are targeting the US (F-1 Visa) or UK (Tier 4), you must prepare strong proof of financial ties to your home country. Application fee waivers are heavily distributed during Fall Virtual Open Houses. <br><br>Let's push this query to advanced models for deeper analysis:";
                googleQuery = encodeURIComponent(q + " international student visa requirements and funding");
            } else {
                text = "That is an excellent query. While my internal database focuses heavily on Ghanaian institutional data, I have mapped your specific question to external AI models and search databases. <br><br>Click any of the engines below to receive a comprehensive, real-time breakdown of your request:";
            }

            return {
                text: text,
                google: `https://www.google.com/search?q=${googleQuery}`
            };
        }

        // --- PREMIUM VOICE RECOGNITION ENGINE ---
        function startVoiceRecognition() {
            const micBtn = document.getElementById('mic-btn');
            const inputEl = document.getElementById('ai-input');
            
            // Handle cross-browser prefixes for the Web Speech API
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (!SpeechRecognition) {
                alert("Voice recognition is not supported in this browser. Please use Google Chrome or Microsoft Edge.");
                return;
            }

            const recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = true;

            recognition.onstart = function() {
                micBtn.classList.add('recording');
                inputEl.placeholder = "Listening... Speak now.";
            };

            recognition.onresult = function(event) {
                let interimTranscript = '';
                let finalTranscript = '';

                for (let i = event.resultIndex; i < event.results.length; ++i) {
                    if (event.results[i].isFinal) {
                        finalTranscript += event.results[i][0].transcript;
                    } else {
                        interimTranscript += event.results[i][0].transcript;
                    }
                }
                
                inputEl.value = finalTranscript || interimTranscript;
            };

            recognition.onerror = function(event) { 
                console.error(event.error); 
                micBtn.classList.remove('recording');
                inputEl.placeholder = "Type or speak your request...";
            };
            
            recognition.onend = function() {
                micBtn.classList.remove('recording');
                inputEl.placeholder = "Type or speak your request...";
                // Auto-trigger the AI once the user stops speaking
                if(inputEl.value.trim() !== '') triggerAIResponse(); 
            };

            recognition.start();
        }

        // --- MODAL LOGIC ---
        function openPaymentModal() { document.getElementById('paymentModal').style.display = 'flex'; }
        
        function closeModals() { 
            document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); 
            document.getElementById('vid-cover').style.display = 'flex';
            document.getElementById('vid-loading').style.display = 'none';
            document.getElementById('play-btn').style.display = 'flex';
        }

        function processPayment() {
            const btn = document.getElementById('payBtn');
            const num = document.getElementById('momoNumber').value;
            if(num.length < 10) { alert("Please enter a valid 10-digit mobile money number."); return; }

            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Pushing USSD Prompt...';
            btn.style.opacity = '0.8';
            btn.disabled = true;

            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-check-circle"></i> Prompt Sent';
                btn.style.background = '#2563eb';
                alert("A payment prompt for GHS 250.00 has been sent to " + num + ". Please check your phone to authorize.");
                
                setTimeout(() => {
                    closeModals();
                    btn.innerHTML = '<i class="fas fa-lock"></i> Authorize Payment';
                    btn.style.background = '#10b981';
                    btn.disabled = false;
                    btn.style.opacity = '1';
                }, 2000);
            }, 2500);
        }

        function openDoc(topic) {
            const modal = document.getElementById('docModal');
            document.getElementById('docTitle').innerText = topic;
            modal.style.display = 'flex';
        }

        function openVideo(title, desc) {
            document.getElementById('videoTitle').innerText = title;
            document.getElementById('videoDesc').innerText = desc;
            document.getElementById('videoModal').style.display = 'flex';
        }

        function playPremiumVideo() {
            document.getElementById('play-btn').style.display = 'none';
            document.getElementById('vid-loading').style.display = 'block';
            
            setTimeout(() => {
                alert("Premium Access Required: Masterclass streaming is exclusively available to Active Vanguard Members.");
                closeModals();
            }, 2500);
        }

        // --- WASSCE AI ENGINE ---
        const wassceDB = {
            "KNUST": [
                { name: "BSc. Computer Science", req: "Aggregate 12", badge: "Highly Competitive" },
                { name: "BSc. Mechanical Engineering", req: "Aggregate 10", badge: "Excellent Fit" }
            ],
            "UG Legon": [
                { name: "BSc. Information Technology", req: "Aggregate 14", badge: "Highly Competitive" },
                { name: "BA. Economics & Statistics", req: "Aggregate 15", badge: "Eligible" }
            ],
            "UCC": [
                { name: "BCom. Finance", req: "Aggregate 16", badge: "Eligible" },
                { name: "BSc. Computer Science", req: "Aggregate 15", badge: "Highly Competitive" }
            ]
        };

        function runWassceAI() {
            const btn = document.getElementById('ai-btn');
            const resultBox = document.getElementById('wassce-result');
            const loadingBox = document.getElementById('ai-loading');
            const container = document.getElementById('dynamic-results-container');
            
            const u1 = document.getElementById('uni-1').value;
            const u2 = document.getElementById('uni-2').value;
            const u3 = document.getElementById('uni-3').value;

            btn.style.display = 'none';
            resultBox.style.display = 'none';
            loadingBox.style.display = 'block';

            setTimeout(() => {
                loadingBox.style.display = 'none';
                
                let htmlOutput = "";
                [u1, u2, u3].forEach((uni, index) => {
                    const courses = wassceDB[uni] || wassceDB["KNUST"]; 
                    let listItems = "";
                    
                    courses.forEach(c => {
                        let color = c.badge.includes('Guaranteed') ? '#10b981' : (c.badge.includes('Fit') ? '#f59e0b' : '#3b82f6');
                        listItems += `
                            <li>
                                <div>
                                    <div class="c-name">${c.name}</div>
                                    <div class="c-req"><i class="fas fa-chart-bar" style="margin-right:5px;"></i> Cut-off Requirement: <strong>${c.req}</strong></div>
                                </div>
                                <span class="c-badge" style="color: ${color}; border-color: ${color}; background: ${color}15;">${c.badge}</span>
                            </li>
                        `;
                    });

                    const medalColors = ['#fbbf24', '#94a3b8', '#b45309']; 
                    
                    htmlOutput += `
                        <div class="uni-result-group">
                            <div class="uni-result-header">
                                <i class="fas fa-medal" style="color: ${medalColors[index]};"></i>
                                <div>
                                    <div style="font-size: 0.8rem; font-weight: 800; color: var(--text-muted); text-transform: uppercase;">Choice 0${index + 1}</div>
                                    <h3>${document.getElementById(`uni-${index+1}`).options[document.getElementById(`uni-${index+1}`).selectedIndex].text}</h3>
                                </div>
                            </div>
                            <ul class="course-list">${listItems}</ul>
                        </div>
                    `;
                });

                container.innerHTML = htmlOutput;
                resultBox.style.display = 'block';
                resultBox.scrollIntoView({ behavior: 'smooth', block: 'start' });

                btn.innerHTML = '<i class="fas fa-sync"></i> Recalculate New Grades';
                btn.style.display = 'block';
                btn.style.marginTop = '30px';

            }, 3000); 
        }
    </script>
</body>
</html>